<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="format-detection" content="telephone=no"/>
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height"/>
  <link rel="stylesheet" type="text/css" href="css/index.css"/>
  <meta name="msapplication-tap-highlight" content="no"/>
  <title>Hello World</title>
  <style>
    button {
      font-size: 1.6em;
    }
  </style>
</head>
<body>
<div class="app">
  <h1 id="title">First page</h1>
  <div id="deviceready" class="blink">
    <p class="event listening">Connecting to Device</p>
    <p class="event received">Device is Ready</p><br/>

    <h2>Slide</h2>
    <button ontouchend="slide('up', 'lightblue', 3, 'index.html?a=b')">up</button><br/><br/>
    <!--<button onclick="slide('left', 'red', 1, 'index.html?x=y')">left, file</button>&nbsp;&nbsp;&nbsp;&nbsp;-->
    <button ontouchend="slide('right', 'red', 3, '#right')">prev</button>&nbsp;&nbsp;&nbsp;&nbsp;
    <button ontouchend="slide('left', 'orange', 3, 'standalone.html?x=y')">next</button><br/><br/>
    <button ontouchend="slide('down', 'green', 3)">down</button><br/><br/><br/><br/>

    <h2>Flip</h2>
    <button ontouchend="flip('up', 'green')">up</button><br/><br/>
    <button ontouchend="flip('left', 'red')">left</button>&nbsp;&nbsp;&nbsp;&nbsp;
    <button ontouchend="flip('right', 'orange')">right</button><br/><br/><br/>
    <button ontouchend="flip('down', 'lightblue')">down</button><br/><br/><br/>

    Demos (requires internet):<br/>
    <button ontouchend="document.location = 'kendouidemo.html'">KendoUI</button>&nbsp;&nbsp;&nbsp;&nbsp;
    <button ontouchend="document.location = 'jqmdemo.html'">JQM</button>

  </div>
</div>
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
  app.initialize();

  //  window.addEventListener("load", function(){alert('load 1')}, false);

  // demo for hooking the Android backbutton to the slide 'right'
  document.addEventListener('backbutton', function() {
    slide('right', 'purple');
  }, false);

  function flip(direction, color, href) {

    setTimeout(function () {
      // update the page inside this timeout
      document.querySelector("#title").innerHTML = direction;
      document.querySelector("html").style.background = color;
    }, 20);

    // TODO test href
    window.plugins.pagetransitions.flip({
          'direction': direction,
          'duration': 350,
          'href': href
        },
        function () {
          console.log('------------------- flip transition finished');
        },
        function (msg) {
          alert('error: ' + msg);
        });
  }

  function slide(direction, color, slowdownfactor, href) {
    if (!href) {
      setTimeout(function () {
        // update the page inside this timeout
        document.querySelector("#title").innerHTML = direction;
        document.querySelector("html").style.background = color;
      }, 20);
    }
    // not passing in options makes the plugin fall back to the defaults defined in the JS API
    window.plugins.pagetransitions.slide({
          'direction': direction,
          'duration': 350,
//          'androiddelay': 50,
          'slowdownfactor' : slowdownfactor,
          'href': href
        },
        function () {
          console.log('------------------- slide transition finished');
        },
        function (msg) {
          alert('error: ' + msg);
        });
  }

  function loadJqmDemo() {
    document.location = 'jqmdemo.html';
  }

</script>
</body>
</html>
